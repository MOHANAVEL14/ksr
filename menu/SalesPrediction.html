<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ðŸŒ¾ Agri Care - Market Rate Prediction</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f4ffe3, #fffde7);
            color: #2e4a1f;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            animation: fadeIn 1s ease-in;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        header {
            background: linear-gradient(90deg, #d5d8d5, #f9a825);
            width: 100%;
            color: #fff;
            font-size: 2rem;
            font-weight: 700;
            padding: 15px 18px;
            border-radius: 12px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
            letter-spacing: 0.5px;
            animation: slideDown 1s ease;
            position: relative;
            text-align: center;
        }
        /* Google translate container in header (right side on desktop) */
        
        #google_translate_element {
            position: absolute;
            right: 18px;
            top: 50%;
            transform: translateY(-50%);
            background: #ffffff;
            padding: 2px 4px;
            border-radius: 4px;
        }
        
        @keyframes slideDown {
            from {
                transform: translateY(-60px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .dashboard {
            width: 95%;
            max-width: 1100px;
            margin-top: 30px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }
        
        .panel {
            background: #ffffff;
            border-radius: 18px;
            padding: 25px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
            transition: all 0.4s ease;
            animation: fadeUp 1s ease;
        }
        
        .panel:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        @keyframes fadeUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        label {
            font-weight: 600;
            color: #3a5a40;
            font-size: 1.1rem;
        }
        
        select {
            margin-top: 12px;
            padding: 10px;
            width: 100%;
            font-size: 1rem;
            border-radius: 10px;
            border: 2px solid #43a047;
            background: #f1f8e9;
            outline: none;
            transition: 0.3s;
        }
        
        select:hover {
            border-color: #f9a825;
        }
        
        .cards {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 25px;
        }
        
        .card {
            background: linear-gradient(135deg, #dcedc8, #fff9c4);
            border-radius: 15px;
            text-align: center;
            padding: 25px;
            border: 2px solid #8bc34a;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }
        
        .card h2 {
            color: #2e7d32;
            margin-bottom: 10px;
        }
        
        .card p {
            font-size: 2rem;
            font-weight: bold;
            color: #1b5e20;
            transition: 0.3s;
        }
        
        canvas {
            margin-top: 25px;
            width: 100% !important;
            height: 300px !important;
        }
        
        h3 {
            text-align: center;
            color: #2e7d32;
            margin-bottom: 10px;
        }
        
        footer {
            margin-top: 30px;
            text-align: center;
            font-size: 0.9rem;
            color: #555;
            opacity: 0.8;
        }
        /* ============ RESPONSIVE ============ */
        
        @media (max-width: 900px) {
            body {
                padding: 16px;
            }
            header {
                font-size: 1.7rem;
            }
            .panel {
                padding: 20px;
            }
        }
        
        @media (max-width: 850px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            /* Header a bit taller to avoid feeling cramped */
            header {
                padding-top: 40px;
            }
            #google_translate_element {
                top: 10px;
                transform: none;
                right: 10px;
            }
        }
        
        @media (max-width: 600px) {
            body {
                padding: 12px;
            }
            header {
                font-size: 1.5rem;
                padding: 38px 10px 14px;
            }
            /* On small screens, put translator below title, centered */
            #google_translate_element {
                position: static;
                display: inline-block;
                margin-top: 8px;
            }
            .dashboard {
                width: 100%;
                margin-top: 20px;
                gap: 20px;
            }
            .panel {
                padding: 18px 16px;
            }
            .cards {
                grid-template-columns: 1fr;
            }
            .card {
                padding: 18px 14px;
            }
            .card p {
                font-size: 1.6rem;
            }
            canvas {
                height: 260px !important;
            }
        }
        
        @media (max-width: 420px) {
            header {
                font-size: 1.35rem;
                padding: 34px 8px 14px;
            }
            label {
                font-size: 1rem;
            }
            select {
                font-size: 0.95rem;
                padding: 8px 10px;
            }
            .card h2 {
                font-size: 1.1rem;
            }
            .card p {
                font-size: 1.4rem;
            }
            canvas {
                height: 230px !important;
            }
            footer {
                font-size: 0.8rem;
            }
        }
        /* Google Translate cleanup */
        
        .goog-logo-link,
        .goog-te-gadget span,
        .goog-te-banner-frame,
        #goog-gt-tt {
            display: none !important;
        }
        
        .goog-te-gadget {
            font-size: 0 !important;
        }
    </style>
</head>

<body>

    <header>
        ðŸŒ¾ Agri Care - Market Rate Prediction
        <!-- Google Translate dropdown -->
        <span id="google_translate_element"></span>
    </header>

    <div class="dashboard">
        <div class="panel">
            <label for="itemSelect">Select Crop:</label>
            <select id="itemSelect">
                <option value="Tomato">Tomato</option>
                <option value="Potato">Potato</option>
                <option value="Onion">Onion</option>
                <option value="Mango">Mango</option>
                <option value="Banana">Banana</option>
                <option value="Rice">Rice</option>
            </select>

            <div class="cards">
                <div class="card">
                    <h2>Today's Price</h2>
                    <p id="todayPrice">--</p>
                </div>
                <div class="card">
                    <h2>Tomorrow's Prediction</h2>
                    <p id="tomorrowPrice">--</p>
                </div>
            </div>
        </div>

        <div class="panel">
            <h3>ðŸ“ˆ Weekly Market Trend</h3>
            <canvas id="rateChart"></canvas>
        </div>
    </div>

    <footer>Â© 2025 Agri Care | Smart Market Insights</footer>

    <!-- ===== GOOGLE TRANSLATE SCRIPT ===== -->
    <script type="text/javascript">
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                    pageLanguage: 'en',
                    includedLanguages: 'en,hi,ta,te,ml,kn,bn,mr,gu,pa,or,ur',
                    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
                },
                'google_translate_element'
            );
        }

        // Save selected language
        document.addEventListener("change", function(e) {
            if (e.target.classList.contains("goog-te-combo")) {
                localStorage.setItem("preferredLang", e.target.value);
            }
        });

        // Restore language on reload
        window.addEventListener("load", function() {
            const lang = localStorage.getItem("preferredLang");
            if (!lang) return;

            const interval = setInterval(() => {
                const select = document.querySelector(".goog-te-combo");
                if (select) {
                    select.value = lang;
                    select.dispatchEvent(new Event("change"));
                    clearInterval(interval);
                }
            }, 500);
        });
    </script>
    <script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

    <!-- ===== CHART + PRICE LOGIC ===== -->
    <script>
        const ctx = document.getElementById("rateChart").getContext("2d");
        let chart;

        const dataSamples = {
            Tomato: [45, 48, 47, 49, 50, 52, 53],
            Potato: [30, 31, 29, 33, 34, 35, 37],
            Onion: [25, 26, 27, 29, 30, 31, 33],
            Mango: [80, 82, 84, 86, 88, 90, 91],
            Banana: [40, 42, 44, 43, 45, 46, 47],
            Rice: [60, 62, 61, 63, 65, 66, 68],
        };

        function animateValue(id, start, end, duration) {
            const obj = document.getElementById(id);
            let startTime = null;

            function step(timestamp) {
                if (!startTime) startTime = timestamp;
                const progress = Math.min((timestamp - startTime) / duration, 1);
                obj.textContent = "â‚¹" + (start + (end - start) * progress).toFixed(2);
                if (progress < 1) window.requestAnimationFrame(step);
            }

            window.requestAnimationFrame(step);
        }

        function renderChart(item) {
            const prices = dataSamples[item];
            const labels = ["Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"];

            if (chart) chart.destroy();

            const gradient = ctx.createLinearGradient(0, 0, 0, 400);
            gradient.addColorStop(0, "#81c784");
            gradient.addColorStop(1, "#fbc02d");

            chart = new Chart(ctx, {
                type: "bar",
                data: {
                    labels,
                    datasets: [{
                        label: item + " Price (â‚¹/kg)",
                        data: prices,
                        backgroundColor: gradient,
                        borderRadius: 8,
                    }]
                },
                options: {
                    animation: {
                        duration: 1200,
                        easing: "easeOutQuart"
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: "#2e7d32"
                            }
                        }
                    },
                    scales: {
                        x: {
                            ticks: {
                                color: "#2e7d32"
                            }
                        },
                        y: {
                            ticks: {
                                color: "#2e7d32"
                            }
                        }
                    }
                }
            });

            const today = prices[6];
            const tomorrow = today + (Math.random() * 4 - 2);
            animateValue("todayPrice", 0, today, 800);
            animateValue("tomorrowPrice", 0, tomorrow, 800);
        }

        document.getElementById("itemSelect").addEventListener("change", (e) => {
            renderChart(e.target.value);
        });

        // initial load
        renderChart("Tomato");
    </script>

</body>

</html>